name: helic
synopsis: Clipboard Manager
description: See <https://hackage.haskell.org/package/helic/docs/Helic.html>
<<: !include shared/meta.yaml
<<: !include shared/extensions.yaml

extra-source-files:
  - readme.md
  - changelog.md

dependencies:
  - name: base
    version: '>= 4 && < 5'
    mixin:
      hiding (Prelude)

library:
  source-dirs: lib
  dependencies:
    - chronos >= 1.1.1
    - either >= 5
    - exon >= 0.3
    - gi-gdk >= 3
    - gi-glib >= 2
    - gi-gtk >= 3
    - hostname >= 1
    - http-client >= 0.5.14
    - http-client-tls >= 0.3.1
    - incipit >= 0.1.0.3
    - optparse-applicative >= 0.16
    - path >= 0.8
    - path-io >= 1.6
    - polysemy >= 1.6
    - polysemy-conc >= 0.6
    - polysemy-chronos >= 0.3
    - polysemy-http >= 0.6
    - polysemy-log >= 0.5
    - polysemy-plugin >= 0.4
    - polysemy-process >= 0.6
    # - polysemy-resume >= 0.2
    - polysemy-time >= 0.3
    - servant >= 0.18
    - servant-client >= 0.18
    - servant-client-core >= 0.18
    - servant-server >= 0.18
    - table-layout >= 0.9
    - template-haskell
    - terminal-size >= 0.3.2.1
    - transformers
    - typed-process >= 0.2.6
    - wai-extra >= 3.1
    - warp >= 3.3
    - unix
    - yaml >= 0.11
  when:
    condition: false
    generated-other-modules:
      - Paths_helic

executables:
  hel:
    main: Main.hs
    source-dirs: app
    ghc-options:
      - -threaded
      - -rtsopts
      - -with-rtsopts=-N
    dependencies:
      - helic
      - incipit
      - polysemy
      - polysemy-plugin
    when:
      condition: false
      generated-other-modules:
        - Paths_helic

tests:
  helic-unit:
    <<: !include shared/test.yaml
    dependencies:
      - exon
      - helic
      - incipit
      - chronos
      - containers
      - path
      - polysemy
      - polysemy-chronos
      - polysemy-conc
      - polysemy-log
      - polysemy-plugin
      - polysemy-test
      - polysemy-time
      - tasty
      - torsor
    when:
      condition: false
      generated-other-modules:
        - Paths_helic

ghc-options:
  - -Wall
  - -Wredundant-constraints
  - -Wunused-packages
  - -fplugin=Polysemy.Plugin
