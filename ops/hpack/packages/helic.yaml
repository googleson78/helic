name: helic
synopsis: Clipboard Manager
description: See <https://hackage.haskell.org/package/helic/docs/Helic.html>
<<: !include shared/meta.yaml
<<: !include shared/extensions.yaml

extra-source-files:
  - readme.md
  - changelog.md

dependencies:
  - name: base
    version: '>= 4 && < 5'
    mixin:
      hiding (Prelude)

library:
  source-dirs: lib
  other-modules:
    - Prelude
  generated-other-modules:
    - Paths_helic
  dependencies:
    - aeson >= 1.4
    - chronos >= 1.1.1
    - containers
    - data-default >= 0.2
    - either >= 5
    - exon >= 0.2.0.1
    - gi-gdk >= 3
    - gi-gtk >= 3
    - hostname >= 1
    - http-client >= 0.5.14
    - http-client-tls >= 0.3.1
    - optparse-applicative >= 0.16
    - path >= 0.8
    - path-io >= 1.6
    - polysemy >= 1.6
    - polysemy-conc >= 0.5
    - polysemy-chronos >= 0.2.0.1
    - polysemy-http >= 0.5
    - polysemy-log >= 0.4
    - polysemy-plugin >= 0.4
    - polysemy-process >= 0.5
    - polysemy-resume >= 0.2
    - polysemy-time >= 0.1.4
    - relude >= 0.7
    - servant >= 0.18
    - servant-client >= 0.18
    - servant-client-core >= 0.18
    - servant-server >= 0.18
    - template-haskell
    - text
    - typed-process >= 0.2.6
    - wai >= 3.2
    - wai-extra >= 3.1
    - warp >= 3.3
    - unix
    - yaml >= 0.11

executables:
  hel:
    main: Main.hs
    source-dirs: app
    ghc-options:
      - -threaded
      - -rtsopts
      - -with-rtsopts=-N
    dependencies:
      - name: helic
        mixin:
          - hiding (Helic.Prelude)
          - (Helic.Prelude as Prelude)
      - polysemy
      - polysemy-plugin

tests:
  helic-unit:
    <<: !include shared/test.yaml
    dependencies:
      - name: helic
        mixin:
          - hiding (Helic.Prelude)
          - (Helic.Prelude as Prelude)
      - chronos
      - containers
      - path
      - polysemy
      - polysemy-chronos
      - polysemy-log
      - polysemy-plugin
      - polysemy-test
      - polysemy-time
      - tasty
      - torsor

ghc-options:
  - -Wall
  - -Wredundant-constraints
  - -Wunused-packages
  - -fplugin=Polysemy.Plugin
